(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78b1a40e"],{"129e":function(t,i,a){"use strict";var s=a("3620"),e=a.n(s);e.a},"2f21":function(t,i,a){"use strict";var s=a("79e5");t.exports=function(t,i){return!!t&&s(function(){i?t.call(null,function(){},1):t.call(null)})}},"32a6":function(t,i,a){var s=a("241e"),e=a("c3a1");a("ce7e")("keys",function(){return function(t){return e(s(t))}})},3620:function(t,i,a){},"55dd":function(t,i,a){"use strict";var s=a("5ca1"),e=a("d8e8"),h=a("4bf8"),n=a("79e5"),o=[].sort,d=[1,2,3];s(s.P+s.F*(n(function(){d.sort(void 0)})||!n(function(){d.sort(null)})||!a("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(h(this)):o.call(h(this),e(t))}})},"7ed4":function(t,i,a){"use strict";var s=a("2b0e"),e=new s["default"];i["a"]=e},"7f7f":function(t,i,a){var s=a("86cc").f,e=Function.prototype,h=/^\s*function ([^ (]*)/,n="name";n in e||a("9e1e")&&s(e,n,{configurable:!0,get:function(){try{return(""+this).match(h)[1]}catch(t){return""}}})},"8aae":function(t,i,a){a("32a6"),t.exports=a("584a").Object.keys},"8c93":function(t,i,a){var s;
/*!
 * sChart JavaScript Library v2.0.1
 * http://blog.gdfengshuo.com/example/sChart/ | Released under the MIT license
 * Date: 2018-04-16T18:59Z
 */
/*!
 * sChart JavaScript Library v2.0.1
 * http://blog.gdfengshuo.com/example/sChart/ | Released under the MIT license
 * Date: 2018-04-16T18:59Z
 */
(function(e,h){s=function(){return h(e)}.call(i,a,i,t),void 0===s||(t.exports=s)})(this,function(t){"use strict";function i(t,i,a,s){this.canvas=document.getElementById(t),this.ctx=this.canvas.getContext("2d"),this.dpi=window.devicePixelRatio||1,this.type=i,this.data=a,this.dataLength=this.data.length,this.showValue=!0,this.autoWidth=!1,this.width=this.canvas.width*this.dpi,this.height=this.canvas.height*this.dpi,this.topPadding=50*this.dpi,this.leftPadding=50*this.dpi,this.rightPadding=0*this.dpi,this.bottomPadding=50*this.dpi,this.yEqual=5,this.yLength=0,this.xLength=0,this.yFictitious=0,this.yRatio=0,this.bgColor="#ffffff",this.fillColor="#1E9FFF",this.axisColor="#666666",this.contentColor="#eeeeee",this.titleColor="#000000",this.title="",this.titlePosition="top",this.radius=100*this.dpi,this.innerRadius=70*this.dpi,this.colorList=["#1E9FFF","#13CE66","#F7BA2A","#FF4949","#72f6ff","#199475","#e08031","#726dd1"],this.legendColor="#000000",this.legendTop=40*this.dpi,this.totalValue=this.getTotalValue(),this.init(s)}return i.prototype={init:function(t){if(0===this.dataLength)return!1;if(t){var i=["topPadding","leftPadding","rightPadding","bottomPadding","radius","innerRadius","legendTop"];for(var a in t)"colorList"===a&&Array.isArray(t[a])?this[a]=t[a].concat(this[a]):i.indexOf(a)>-1?this[a]=t[a]*this.dpi:this[a]=t[a]}t.autoWidth?(this.width=this.canvas.width=this.canvas.parentNode.offsetWidth*this.dpi,this.height=this.canvas.height=this.canvas.parentNode.offsetHeight*this.dpi,this.canvas.setAttribute("style","width:"+this.canvas.parentNode.offsetWidth+"px;height:"+this.canvas.parentNode.offsetHeight+"px;")):(this.canvas.setAttribute("style","width:"+this.canvas.width+"px;height:"+this.canvas.height+"px;"),this.canvas.width*=this.dpi,this.canvas.height*=this.dpi),"bar"===this.type||"line"===this.type?(this.yLength=Math.floor((this.height-this.topPadding-this.bottomPadding-10)/this.yEqual),this.xLength=Math.floor((this.width-this.leftPadding-this.rightPadding-10)/this.dataLength),this.yFictitious=this.getYFictitious(this.data),this.yRatio=this.yLength/this.yFictitious,this.drawBarUpdate()):this.drawPieUpdate()},drawBarUpdate:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height),this.drawAxis(),this.drawPoint(),this.drawTitle(),this.drawBarChart()},drawPieUpdate:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height),this.drawLegend(),this.drawTitle(),this.drawPieChart()},drawBarChart:function(){this.ctx.fillStyle=this.fillColor,this.ctx.strokeStyle=this.fillColor;for(var t=0;t<this.dataLength;t++)this.data[t].left=this.leftPadding+this.xLength*(t+.25),this.data[t].top=this.height-this.bottomPadding-this.data[t].value*this.yRatio,this.data[t].right=this.leftPadding+this.xLength*(t+.75),this.data[t].bottom=this.height-this.bottomPadding,"line"===this.type?(this.ctx.beginPath(),this.ctx.arc(this.data[t].left+this.xLength/4,this.data[t].top,2,0,2*Math.PI,!0),this.ctx.fill(),0!==t&&(this.ctx.moveTo(this.data[t].left+this.xLength/4,this.data[t].top),this.ctx.lineTo(this.data[t-1].left+this.xLength/4,this.data[t-1].top)),this.ctx.stroke()):"bar"===this.type&&this.ctx.fillRect(this.data[t].left,this.data[t].top,this.data[t].right-this.data[t].left,this.data[t].bottom-this.data[t].top),this.showValue&&(this.ctx.font=12*this.dpi+"px Arial",this.ctx.fillText(this.data[t].value,this.data[t].left+this.xLength/4,this.data[t].top-5))},drawPieChart:function(){for(var t=this.width/2,i=this.height/2,a=0,s=0,e=0;e<this.dataLength;e++)this.ctx.beginPath(),this.ctx.fillStyle=this.colorList[e],this.ctx.moveTo(t,i),this.data[e].start=0===e?-Math.PI/2:this.data[e-1].end,this.data[e].end=this.data[e].start+this.data[e].value/this.totalValue*2*Math.PI,this.ctx.arc(t,i,this.radius,this.data[e].start,this.data[e].end),this.ctx.closePath(),this.ctx.fill(),this.data[e].middle=(this.data[e].start+this.data[e].end)/2,a=Math.ceil(Math.abs(this.radius*Math.cos(this.data[e].middle))),s=Math.floor(Math.abs(this.radius*Math.sin(this.data[e].middle))),this.ctx.strokeStyle=this.colorList[e],this.showValue&&(this.data[e].middle<=0?(this.ctx.textAlign="left",this.ctx.moveTo(t+a,i-s),this.ctx.lineTo(t+a+10,i-s-10),this.ctx.moveTo(t+a+10,i-s-10),this.ctx.lineTo(t+a+this.radius/2,i-s-10),this.ctx.stroke(),this.ctx.fillText(this.data[e].value,t+a+5+this.radius/2,i-s-5)):this.data[e].middle>0&&this.data[e].middle<=Math.PI/2?(this.ctx.textAlign="left",this.ctx.moveTo(t+a,i+s),this.ctx.lineTo(t+a+10,i+s+10),this.ctx.moveTo(t+a+10,i+s+10),this.ctx.lineTo(t+a+this.radius/2,i+s+10),this.ctx.stroke(),this.ctx.fillText(this.data[e].value,t+a+5+this.radius/2,i+s+15)):this.data[e].middle>Math.PI/2&&this.data[e].middle<Math.PI?(this.ctx.textAlign="right",this.ctx.moveTo(t-a,i+s),this.ctx.lineTo(t-a-10,i+s+10),this.ctx.moveTo(t-a-10,i+s+10),this.ctx.lineTo(t-a-this.radius/2,i+s+10),this.ctx.stroke(),this.ctx.fillText(this.data[e].value,t-a-5-this.radius/2,i+s+15)):(this.ctx.textAlign="right",this.ctx.moveTo(t-a,i-s),this.ctx.lineTo(t-a-10,i-s-10),this.ctx.moveTo(t-a-10,i-s-10),this.ctx.lineTo(t-a-this.radius/2,i-s-10),this.ctx.stroke(),this.ctx.fillText(this.data[e].value,t-a-5-this.radius/2,i-s-5)));"ring"===this.type&&(this.ctx.beginPath(),this.ctx.fillStyle=this.bgColor,this.ctx.arc(t,i,this.innerRadius,0,2*Math.PI),this.ctx.fill())},drawAxis:function(){this.ctx.beginPath(),this.ctx.strokeStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding+.5,this.topPadding+.5),this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.width-this.rightPadding-.5,this.height-this.bottomPadding+.5),this.ctx.stroke()},drawPoint:function(){this.ctx.beginPath(),this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="center",this.ctx.fillStyle=this.axisColor;for(var t=0;t<this.dataLength;t++){var i=this.data[t].name,a=this.xLength*(t+1);this.ctx.moveTo(this.leftPadding+a+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding+a+.5,this.height-this.bottomPadding+5.5),this.ctx.fillText(i,this.leftPadding+a-this.xLength/2,this.height-this.bottomPadding+15*this.dpi)}this.ctx.stroke(),this.ctx.beginPath(),this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="right",this.ctx.fillStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding+.5),this.ctx.lineTo(this.leftPadding-4.5,this.height-this.bottomPadding+.5),this.ctx.fillText(0,this.leftPadding-10,this.height-this.bottomPadding+5);for(t=0;t<this.yEqual;t++){var s=this.yFictitious*(t+1),e=this.yLength*(t+1);this.ctx.beginPath(),this.ctx.strokeStyle=this.axisColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding-e+.5),this.ctx.lineTo(this.leftPadding-4.5,this.height-this.bottomPadding-e+.5),this.ctx.stroke(),this.ctx.fillText(s,this.leftPadding-10,this.height-this.bottomPadding-e+5),this.ctx.beginPath(),this.ctx.strokeStyle=this.contentColor,this.ctx.moveTo(this.leftPadding+.5,this.height-this.bottomPadding-e+.5),this.ctx.lineTo(this.width-this.rightPadding-.5,this.height-this.bottomPadding-e+.5),this.ctx.stroke()}},drawTitle:function(){this.title&&(this.ctx.beginPath(),this.ctx.textAlign="center",this.ctx.fillStyle=this.titleColor,this.ctx.font=16*this.dpi+"px Microsoft YaHei","bottom"===this.titlePosition&&this.bottomPadding>=40?this.ctx.fillText(this.title,this.width/2,this.height-5):this.ctx.fillText(this.title,this.width/2,this.topPadding/2+5))},drawLegend:function(){for(var t=0;t<this.dataLength;t++)this.ctx.fillStyle=this.colorList[t],this.ctx.fillRect(10,this.legendTop+15*t*this.dpi,20,11),this.ctx.fillStyle=this.legendColor,this.ctx.font=12*this.dpi+"px Microsoft YaHei",this.ctx.textAlign="left",this.ctx.fillText(this.data[t].name,35,this.legendTop+10+15*t*this.dpi)},getYFictitious:function(t){var i=t.slice(0);i.sort(function(t,i){return-(t.value-i.value)});var a=Math.ceil(i[0].value/this.yEqual),s=a.toString().length-1;return s=s>2?2:s,Math.ceil(a/Math.pow(10,s))*Math.pow(10,s)},getTotalValue:function(){for(var t=0,i=0;i<this.dataLength;i++)t+=this.data[i].value;return t}},i})},a4bb:function(t,i,a){t.exports=a("8aae")},ce7e:function(t,i,a){var s=a("63b6"),e=a("584a"),h=a("294c");t.exports=function(t,i){var a=(e.Object||{})[t]||Object[t],n={};n[t]=i(a),s(s.S+s.F*h(function(){a(1)}),"Object",n)}},e2ad:function(t,i,a){"use strict";a.r(i);var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-row",{staticClass:"mgb",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("div",{staticClass:"grid-content grid-con-1"},[a("i",{staticClass:"el-icon-cpu grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.device_cnt))]),a("div",[t._v("设备数量")])])])])],1),a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"10px"}}},[a("div",{staticClass:"grid-content grid-con-2"},[a("i",{staticClass:"el-icon-lx-warn grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.warning_cnt))]),a("div",[t._v("报警总数")])])])])],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"hover"}},[a("schart",{ref:"line",staticClass:"schart",attrs:{canvasId:"line",data:t.warningdata,type:"line",options:t.options}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"hover"}},[a("schart",{ref:"bar",staticClass:"schart",attrs:{canvasId:"bar",data:t.devicedata,type:"bar",options:t.options2}})],1)],1)],1)],1)},e=[],h=(a("55dd"),a("a4bb")),n=a.n(h),o=(a("7f7f"),a("cadf"),a("551c"),a("097d"),function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",[a("canvas",{attrs:{id:t.canvasId}})])}),d=[],l=a("8c93"),r=a.n(l),c={data:function(){return{schart:null,opt:{}}},props:{canvasId:{type:String,default:""},type:{type:String,default:"bar"},data:{type:Array,default:[]},options:{type:Object,required:!1}},mounted:function(){this.renderChart()},methods:{renderChart:function(){this.schart=null,this.opt=this.options,this.width&&this.height||(this.opt?this.opt["autoWidth"]=!0:this.opt={autoWidth:!0}),this.schart=new r.a(this.canvasId,this.type,this.data,this.opt)}},watch:{data:function(){this.renderChart()},options:function(){this.renderChart()},type:function(){this.renderChart()}}},g=c,u=a("2877"),f=Object(u["a"])(g,o,d,!1,null,null,null);f.options.__file="vue-schart.vue";var v=f.exports,x=a("7ed4"),p={name:"dashboard",data:function(){return{name:localStorage.getItem("username"),get_device_url:"admin/equip/all",get_data_url:"admin/record/all",search_data_url:"admin/record/some",device_cnt:0,warning_cnt:0,alldeviceData:[],allwarningData:[],warningdata:[{name:"03/04",value:0},{name:"03/05",value:0},{name:"03/06",value:0},{name:"03/07",value:0},{name:"03/08",value:0},{name:"03/09",value:0},{name:"03/10",value:0}],devicedata:[{name:"01",value:0},{name:"02",value:0},{name:"03",value:0},{name:"04",value:0},{name:"05",value:0},{name:"06",value:0},{name:"07",value:0}],options:{title:"每日报警概览（单位：次）",fillColor:"rgb(45, 140, 240)",bottomPadding:20,topPadding:30},options2:{title:"设备报警概览（单位：次）",contentColor:"#EEEEEE",fillColor:"rgb(45, 140, 240)",bottomPadding:20,topPadding:30}}},components:{Schart:v},created:function(){this.handleListener()},activated:function(){this.handleListener()},deactivated:function(){window.removeEventListener("resize",this.renderChart),x["a"].$off("collapse",this.handleBus)},methods:{getData:function(){var t=this;this.alldeviceData.splice(0,this.alldeviceData.length),this.allwarningData.splice(0,this.allwarningData.length),this.$axios.get(this.get_device_url).then(function(i){t.device_cnt=i.data.length;for(var a=0;a<t.device_cnt;a++)t.alldeviceData.push(i.data[a])}),this.$axios.get(this.get_data_url).then(function(i){t.warning_cnt=i.data.length;for(var a=0;a<t.warning_cnt;a++)t.allwarningData.push(i.data[a]);t.changeData()})},changeData:function(){this.warningdata=[{name:"03/04",value:0},{name:"03/05",value:0},{name:"03/06",value:0},{name:"03/07",value:0},{name:"03/08",value:0},{name:"03/09",value:0},{name:"03/10",value:0}],this.devicedata=[{name:"01",value:0},{name:"02",value:0},{name:"03",value:0},{name:"04",value:0},{name:"05",value:0},{name:"06",value:0},{name:"07",value:0}];for(var t=(new Date).getTime(),i=0;i<this.warningdata.length;i++){var a=new Date(t-864e5*(6-i)),s=a.getFullYear(),e=a.getMonth()+1,h=a.getDate();e>=1&&e<=9&&(e="0"+e),h>=0&&h<=9&&(h="0"+h),this.warningdata[i].name=s+"/"+e+"/"+h;for(var o=0;o<this.warning_cnt;o++)this.warningdata[i].name===this.allwarningData[o].warning_time.substr(0,10)&&(this.warningdata[i].value+=1);this.warningdata[i].name=e+"/"+h}for(var d={},l=0;l<this.allwarningData.length;l++){var r=this.allwarningData[l].device_id;d[r]=d[r]?d[r]+1:1}var c=n()(d).map(function(t){return{name:t,value:d[t]}});c.sort(function(t,i){return i.value-t.value}),this.devicedata=c.slice(0,7)},handleListener:function(){this.getData(),x["a"].$on("collapse",this.handleBus),window.addEventListener("resize",this.renderChart)},handleBus:function(t){var i=this;setTimeout(function(){i.renderCharts()},300)},renderCharts:function(){this.$refs.bar.renderChart(),this.$refs.line.renderChart()}}},m=p,w=(a("129e"),Object(u["a"])(m,s,e,!1,null,"c48555f0",null));w.options.__file="Dashboard.vue";i["default"]=w.exports}}]);